<template>
    <div class="container">
    <lightning-card>
        <h3 slot="title">
            <img src={rewardsIcon} alt="Rewards Icon" class="customIcon">
            {pageTitle}
        </h3>
    
        <template if:false={isActive}>
            <div class="slds-align_absolute-center">
                <lightning-button variant="success" label="Activate Rewards Account" value="details" onclick={handleActivate} class="slds-m-left_x-small">
                </lightning-button>
            </div>
        </template>
        <template if:true={isActive}>

            <!-- Buttons -->
            <div class="c-container slds-align_absolute-center">
                <lightning-layout horizontal-align="spread">
                    <lightning-layout-item padding="around-small">
                        <lightning-button variant="destructive-text" label="Deactivate Account" value="hide" onclick={handleDeactivate} class="slds-m-left_x-small">
                        </lightning-button>
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small">
                        
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small">
                        <lightning-button variant="brand" label="Redeem Points" value="redeem" onclick={handleRedeem} class="slds-m-left_x-small">
                        </lightning-button>
                        <lightning-button variant="brand" label="Add Points" value="adhoc" onclick={handleAdhoc} class="slds-m-left_x-small">
                        </lightning-button>
                        <lightning-button variant="brand-outline" label="Recent Activity" value="adhoc" onclick={handleTable} class="slds-m-left_x-small">
                        </lightning-button>
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small">

                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small">
                        <lightning-button variant="destructive-text" label="Delete Event" value="delete" icon-name="utility:delete" onclick={deleteRecord} class="slds-m-left_x-small">
                        </lightning-button>
                    </lightning-layout-item>
                </lightning-layout>
            </div>

            <!-- Recent Rewards Events datatable -->
            <template if:true={isTable}>
                <lightning-card title="Recent Activity">
                    <lightning-datatable 
                    data={rewardsEventList} columns={cols} key-field="Id" 
                    max-row-selection="1" onrowselection={handleSelection} >
                    </lightning-datatable>
                </lightning-card>
            </template>

            <!-- Ad-Hoc Rewards Event creation -->
            <template if:true={isAdhoc}>
                <lightning-card title="Issue Ad-Hoc Points" icon-name="standard:record">
                    <div class="slds-var-m-around_medium" >
                        <lightning-input
                            label="Description"
                            onchange={handleDescriptionChange}
                            class="slds-var-m-bottom_x-small"
                        ></lightning-input>
                        <lightning-input
                            type="number"
                            label="Points"
                            onchange={handlePointsChange}
                            class="slds-var-m-bottom_x-small"
                        ></lightning-input>
                        <lightning-button
                            label="Create Points"
                            variant="brand"
                            onclick={createPoints}
                        ></lightning-button>
                    </div>
                </lightning-card>
            </template>

            <!-- Rewards Redemption -->
            <template if:true={isRedeem}>
                <lightning-card title="Redeem Points" icon-name="standard:record">
                    <p>Should display Lightning Tiles with available rewards. Tiles would be selectable and generate RewardsEvent recordtype redemption.</p>
                </lightning-card>
            </template>

        </template>
    </lightning-card>
    </div>
</template>